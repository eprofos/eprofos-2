{% extends 'public/base.html.twig' %}

{% block title %}{{ page_title }} - EPROFOS{% endblock %}

{% block body %}
<div class="container-fluid p-0">
    <!-- Hero section -->
    <section class="hero-section bg-primary text-white py-5">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-8">
                    <h1 class="display-4 fw-bold mb-3">{{ page_title }}</h1>
                    <p class="lead mb-4">
                        Document officiel d'EPROFOS - Version {{ document.version }}
                    </p>
                    <div class="d-flex flex-wrap gap-2">
                        <span class="badge bg-light text-primary px-3 py-2">
                            <i class="fas fa-calendar-alt me-2"></i>
                            Publié le {{ document.publishedAt|date('d/m/Y') }}
                        </span>
                        <span class="badge bg-light text-primary px-3 py-2">
                            <i class="fas fa-shield-alt me-2"></i>
                            Conforme Qualiopi
                        </span>
                        {% if document.hasFile() %}
                        <a href="{{ document.getFileUrl() }}" target="_blank" class="badge bg-warning text-dark px-3 py-2 text-decoration-none">
                            <i class="fas fa-download me-2"></i>
                            Télécharger PDF
                        </a>
                        {% endif %}
                    </div>
                </div>
                <div class="col-lg-4 text-lg-end">
                    <div class="card bg-light">
                        <div class="card-body">
                            <h5 class="card-title text-primary">Information document</h5>
                            <ul class="list-unstyled mb-0 text-dark">
                                <li><strong>Type :</strong> {{ constant('App\\Entity\\LegalDocument::TYPES')[document_type] }}</li>
                                <li><strong>Version :</strong> {{ document.version }}</li>
                                <li><strong>Dernière modification :</strong> {{ document.updatedAt|date('d/m/Y') }}</li>
                                {% if document.hasFile() %}
                                <li><strong>Format :</strong> PDF disponible</li>
                                {% endif %}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Document content -->
    <section class="py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <div class="document-content">
                                {{ document.content|raw }}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <!-- Navigation -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-bookmark me-2"></i>
                                Documents légaux
                            </h5>
                        </div>
                        <div class="card-body">
                            <nav class="nav flex-column">
                                <a class="nav-link{{ document_type == 'internal_regulation' ? ' active fw-bold' : '' }}" 
                                   href="{{ path('app_legal_internal_regulation') }}">
                                    <i class="fas fa-gavel me-2"></i>
                                    Règlement intérieur
                                </a>
                                <a class="nav-link{{ document_type == 'student_handbook' ? ' active fw-bold' : '' }}" 
                                   href="{{ path('app_legal_student_handbook') }}">
                                    <i class="fas fa-book me-2"></i>
                                    Livret d'accueil stagiaire
                                </a>
                                <a class="nav-link{{ document_type == 'training_terms' ? ' active fw-bold' : '' }}" 
                                   href="{{ path('app_legal_training_terms') }}">
                                    <i class="fas fa-handshake me-2"></i>
                                    Conditions de formation
                                </a>
                                <div class="border-top my-2"></div>
                                <a class="nav-link{{ document_type == 'accessibility_policy' ? ' active fw-bold' : '' }}" 
                                   href="{{ path('app_legal_accessibility_policy') }}">
                                    <i class="fas fa-universal-access me-2"></i>
                                    Politique d'accessibilité
                                </a>
                                <a class="nav-link{{ document_type == 'accessibility_procedures' ? ' active fw-bold' : '' }}" 
                                   href="{{ path('app_legal_accessibility_procedures') }}">
                                    <i class="fas fa-cog me-2"></i>
                                    Procédures d'accessibilité
                                </a>
                                <a class="nav-link{{ document_type == 'accessibility_faq' ? ' active fw-bold' : '' }}" 
                                   href="{{ path('app_legal_accessibility_faq') }}">
                                    <i class="fas fa-question-circle me-2"></i>
                                    FAQ Accessibilité
                                </a>
                            </nav>
                        </div>
                    </div>

                    <!-- Quick actions -->
                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-tools me-2"></i>
                                Actions
                            </h5>
                        </div>
                        <div class="card-body">
                            {% if document.hasFile() %}
                            <a href="{{ document.getFileUrl() }}" target="_blank" class="btn btn-primary btn-sm w-100 mb-2">
                                <i class="fas fa-download me-2"></i>
                                Télécharger le PDF
                            </a>
                            {% endif %}
                            <a href="{{ path('app_legal_documents_download') }}" class="btn btn-outline-primary btn-sm w-100 mb-2">
                                <i class="fas fa-archive me-2"></i>
                                Tous les documents
                            </a>
                            <a href="{{ path('app_contact_index') }}" class="btn btn-outline-secondary btn-sm w-100">
                                <i class="fas fa-envelope me-2"></i>
                                Poser une question
                            </a>
                        </div>
                    </div>

                    <!-- Contact info for accessibility -->
                    {% if document_type starts with 'accessibility' %}
                    <div class="card border-warning">
                        <div class="card-header bg-warning">
                            <h5 class="card-title mb-0">
                                <i class="fas fa-user-friends me-2"></i>
                                Référent Handicap
                            </h5>
                        </div>
                        <div class="card-body">
                            <p class="mb-2"><strong>Jean Martin</strong></p>
                            <p class="mb-1">
                                <i class="fas fa-envelope me-2"></i>
                                <a href="mailto:handicap@eprofos.fr">handicap@eprofos.fr</a>
                            </p>
                            <p class="mb-1">
                                <i class="fas fa-phone me-2"></i>
                                <a href="tel:0123456789">01 23 45 67 89</a>
                            </p>
                            <p class="mb-0 small text-muted">
                                Disponible du lundi au vendredi de 9h à 17h
                            </p>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </section>
</div>

<style>
.document-content {
    line-height: 1.6;
}

.document-content h1 {
    color: var(--bs-primary);
    border-bottom: 2px solid var(--bs-primary);
    padding-bottom: 0.5rem;
    margin-bottom: 1.5rem;
}

.document-content h2 {
    color: var(--bs-dark);
    margin-top: 2rem;
    margin-bottom: 1rem;
}

.document-content h3 {
    color: var(--bs-secondary);
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
}

.document-content ul {
    margin-bottom: 1rem;
}

.document-content li {
    margin-bottom: 0.5rem;
}

.nav-link.active {
    background-color: var(--bs-primary);
    color: white !important;
    border-radius: 0.25rem;
}

.hero-section {
    background: linear-gradient(135deg, var(--bs-primary) 0%, var(--bs-info) 100%);
}
</style>
{% endblock %}
