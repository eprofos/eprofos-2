{% extends 'emails/base.html.twig' %}

{% block subject %}Certificat de formation - {{ formation.title }}{% endblock %}

{% block body %}
<h1 style="color: #2c3e50; text-align: center; margin-bottom: 30px;">
    üéì F√©licitations {{ student.firstName }} !
</h1>

<div style="background-color: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 30px;">
    <p style="font-size: 18px; color: #2c3e50; margin-bottom: 15px;">
        Vous avez termin√© avec succ√®s la formation <strong>"{{ formation.title }}"</strong>.
    </p>
    
    <p style="color: #6c757d; margin-bottom: 0;">
        Votre certificat de formation est en pi√®ce jointe de cet email.
    </p>
</div>

<h2 style="color: #2c3e50; border-bottom: 2px solid #e9ecef; padding-bottom: 10px;">
    üìã D√©tails de certification
</h2>

<table style="width: 100%; margin-bottom: 30px;">
    <tr>
        <td style="padding: 10px 0; border-bottom: 1px solid #e9ecef;">
            <strong>Num√©ro de certificat :</strong>
        </td>
        <td style="padding: 10px 0; border-bottom: 1px solid #e9ecef; color: #007bff;">
            {{ certificate.certificateNumber }}
        </td>
    </tr>
    <tr>
        <td style="padding: 10px 0; border-bottom: 1px solid #e9ecef;">
            <strong>Date d'√©mission :</strong>
        </td>
        <td style="padding: 10px 0; border-bottom: 1px solid #e9ecef;">
            {{ certificate.issuedAt|date('d/m/Y √† H:i') }}
        </td>
    </tr>
    {% if certificate.completionDate %}
    <tr>
        <td style="padding: 10px 0; border-bottom: 1px solid #e9ecef;">
            <strong>Date de fin de formation :</strong>
        </td>
        <td style="padding: 10px 0; border-bottom: 1px solid #e9ecef;">
            {{ certificate.completionDate|date('d/m/Y') }}
        </td>
    </tr>
    {% endif %}
    {% if certificate.totalHours %}
    <tr>
        <td style="padding: 10px 0; border-bottom: 1px solid #e9ecef;">
            <strong>Dur√©e de formation :</strong>
        </td>
        <td style="padding: 10px 0; border-bottom: 1px solid #e9ecef;">
            {{ certificate.totalHours }} heures
        </td>
    </tr>
    {% endif %}
    {% if certificate.finalScore %}
    <tr>
        <td style="padding: 10px 0; border-bottom: 1px solid #e9ecef;">
            <strong>Score obtenu :</strong>
        </td>
        <td style="padding: 10px 0; border-bottom: 1px solid #e9ecef;">
            <span style="background-color: #007bff; color: white; padding: 4px 8px; border-radius: 4px;">
                {{ certificate.finalScore }}%
            </span>
            {% if certificate.grade %}
                <span style="background-color: #6c757d; color: white; padding: 4px 8px; border-radius: 4px; margin-left: 8px;">
                    {{ certificate.gradeLabel }}
                </span>
            {% endif %}
        </td>
    </tr>
    {% endif %}
    {% if certificate.attendanceRate %}
    <tr>
        <td style="padding: 10px 0; border-bottom: 1px solid #e9ecef;">
            <strong>Taux de pr√©sence :</strong>
        </td>
        <td style="padding: 10px 0; border-bottom: 1px solid #e9ecef;">
            {{ certificate.attendanceRate }}%
        </td>
    </tr>
    {% endif %}
</table>

<div style="background-color: #e7f3ff; border-left: 4px solid #007bff; padding: 15px; margin-bottom: 30px;">
    <h3 style="color: #0056b3; margin-top: 0;">üîç V√©rification d'authenticit√©</h3>
    <p style="margin-bottom: 10px; color: #495057;">
        Votre certificat peut √™tre v√©rifi√© en ligne √† tout moment :
    </p>
    <p style="margin-bottom: 0;">
        <a href="{{ verificationUrl }}" style="color: #007bff; text-decoration: none; font-weight: bold;">
            {{ verificationUrl }}
        </a>
    </p>
</div>

{% if formation.description %}
<h2 style="color: #2c3e50; border-bottom: 2px solid #e9ecef; padding-bottom: 10px;">
    üìö √Ä propos de cette formation
</h2>
<p style="color: #6c757d; line-height: 1.6; margin-bottom: 30px;">
    {{ formation.description|slice(0, 500) }}{% if formation.description|length > 500 %}...{% endif %}
</p>
{% endif %}

<div style="background-color: #d4edda; border: 1px solid #c3e6cb; border-radius: 8px; padding: 20px; margin-top: 30px;">
    <h3 style="color: #155724; margin-top: 0;">
        üéâ Bravo pour votre r√©ussite !
    </h3>
    <p style="color: #155724; margin-bottom: 10px;">
        Cette certification atteste de vos nouvelles comp√©tences et de votre engagement dans votre d√©veloppement professionnel.
    </p>
    <p style="color: #155724; margin-bottom: 0;">
        Nous esp√©rons vous revoir bient√¥t pour de nouvelles formations !
    </p>
</div>

<div style="text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #e9ecef;">
    <p style="color: #6c757d; font-size: 14px; margin-bottom: 5px;">
        Cet email a √©t√© envoy√© automatiquement. Merci de ne pas y r√©pondre.
    </p>
    <p style="color: #6c757d; font-size: 14px; margin-bottom: 0;">
        Pour toute question, contactez-nous √† formation@eprofos.fr
    </p>
</div>
{% endblock %}
